<div class="panel panel-default">
  <div class="panel-heading">
    <div class="row">
      <div class="col-sm-10">
        <h5>消息列表</h5>
      </div>
      <div class="col-sm-2">
        <%= link_to "新建系统消息", new_message_path, class: "btn btn-success pull-right" %>
      </div>
    </div>
  </div>
  <div class="panel-body">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>消息内容</th>
          <th>接收者</th>
          <th>发送者</th>
          <th>消息类型</th>
          <th>创建时间</th>
        </tr>
      </thead>

      <tbody>
        <% @messages.each do |message| %>
          <tr>
            <td><%= message.id %></td>
            <td><%= message.body %></td>
            <td><%= message.user.try(:nickname) || '所有用户' %></td>
            <td><%= message.actor.try(:nickname) || '系统' %></td>
            <td><%= render_message_type(message) %></td>
            <td><%= message.created_at.strftime('%Y-%m-%d %H:%M:%S') %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

</div>

